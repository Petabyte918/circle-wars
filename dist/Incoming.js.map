{"version":3,"sources":["../server/Incoming.js"],"names":["Incoming","socket","hero","entities","directions","on","components","player","up","calculateAcceleration","down","left","right","acceleration","x","y","norm","Vectors","setPolar","Math","PI"],"mappings":"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","file":"Incoming.js","sourcesContent":["import {Vectors} from './Vectors'\r\n\r\nexport class Incoming {\r\n\r\n    constructor(socket,hero, entities) {\r\n        this.socket = socket\r\n        this.hero = hero\r\n\r\n        this.directions(socket, hero)\r\n    }\r\n\r\n    directions(socket, hero) {\r\n        socket.on('startUp', () => {\r\n            hero.components.player.up = true\r\n            calculateAcceleration()\r\n        })\r\n        socket.on('startDown', () => {\r\n            hero.components.player.down = true\r\n            calculateAcceleration()\r\n        })\r\n        socket.on('startLeft', () => {\r\n            hero.components.player.left = true\r\n            calculateAcceleration()\r\n        })\r\n        socket.on('startRight', () => {\r\n            hero.components.player.right = true\r\n            calculateAcceleration()\r\n        })\r\n        socket.on('endUp', () => {\r\n            hero.components.player.up = false\r\n            calculateAcceleration()\r\n        })\r\n        socket.on('endDown', () => {\r\n            hero.components.player.down = false\r\n            calculateAcceleration()\r\n        })\r\n        socket.on('endLeft', () => {\r\n            hero.components.player.left = false\r\n            calculateAcceleration()\r\n        })\r\n        socket.on('endRight', () => {\r\n            hero.components.player.right = false\r\n            calculateAcceleration()\r\n        })\r\n\r\n        function calculateAcceleration() {\r\n            const up = hero.components.player.up\r\n            const down = hero.components.player.down\r\n            const left = hero.components.player.left\r\n            const right = hero.components.player.right\r\n\r\n            if (up) {\r\n                if (down) {\r\n                    if (left) {\r\n                        if (right) {\r\n                            hero.components.acceleration.x = 0\r\n                            hero.components.acceleration.y = 0\r\n                        } else {\r\n                            hero.components.acceleration.x = -hero.components.acceleration.norm\r\n                            hero.components.acceleration.y = 0\r\n                        }\r\n                    } else if (right) {\r\n                        hero.components.acceleration.x = hero.components.acceleration.norm\r\n                        hero.components.acceleration.y = 0\r\n                    } else {\r\n                        hero.components.acceleration.x = 0\r\n                        hero.components.acceleration.y = 0\r\n                    }\r\n                } else if (left) {\r\n                    if (right) {\r\n                        hero.components.acceleration.x = 0\r\n                        hero.components.acceleration.y = -hero.components.acceleration.norm\r\n                    } else {\r\n                        hero.components.acceleration = Vectors.setPolar(hero.components.acceleration, -Math.PI * 3 / 4, hero.components.acceleration.norm)\r\n                    }\r\n                } else if (right) {\r\n                    hero.components.acceleration = Vectors.setPolar(hero.components.acceleration, -Math.PI * 1 / 4, hero.components.acceleration.norm)\r\n                } else {\r\n                    hero.components.acceleration.x = 0\r\n                    hero.components.acceleration.y = -hero.components.acceleration.norm\r\n                }\r\n            } else if (down) {\r\n                if (left) {\r\n                    if (right) {\r\n                        hero.components.acceleration.x = 0\r\n                        hero.components.acceleration.y = hero.components.acceleration.norm\r\n                    } else {\r\n                        hero.components.acceleration = Vectors.setPolar(hero.components.acceleration, Math.PI * 3 / 4, hero.components.acceleration.norm)\r\n                    }\r\n                } else if (right) {\r\n                    hero.components.acceleration = Vectors.setPolar(hero.components.acceleration, Math.PI * 1 / 4, hero.components.acceleration.norm)\r\n                } else {\r\n                    hero.components.acceleration.x = 0\r\n                    hero.components.acceleration.y = hero.components.acceleration.norm\r\n                }\r\n            } else if (left) {\r\n                if (right) {\r\n                    hero.components.acceleration.x = 0\r\n                    hero.components.acceleration.y = 0\r\n                } else {\r\n                    hero.components.acceleration.x = -hero.components.acceleration.norm\r\n                    hero.components.acceleration.y = 0\r\n                }\r\n            } else if (right) {\r\n                hero.components.acceleration.x = hero.components.acceleration.norm\r\n                hero.components.acceleration.y = 0\r\n            } else {\r\n                hero.components.acceleration.x = 0\r\n                hero.components.acceleration.y = 0\r\n            }\r\n        }\r\n    }\r\n}"]}